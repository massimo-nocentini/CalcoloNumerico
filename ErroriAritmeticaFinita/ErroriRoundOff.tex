\section{Round-off}

\begin{exercise}[1.5]
Per il testo dell'esercizio consultare il libro di testo.
\end{exercise}
Scrivo le rappresentazioni in formato stringa:
\begin{displaymath}
	\begin{split}
		\alpha_{0}\alpha_{1}\ldots\alpha_{15} = 0\underbrace{1\ldots1}_{13}01 & 
			\rightarrow  32765 \\
		\alpha_{0}\alpha_{1}\ldots\alpha_{15} = 0\underbrace{1\ldots1}_{13}10 & 
			\rightarrow  32766 \\
		\alpha_{0}\alpha_{1}\ldots\alpha_{15} = 0\underbrace{1\ldots1}_{13}11 & 
			\rightarrow  32767 \\
		\alpha_{0}\alpha_{1}\ldots\alpha_{15} = 1\underbrace{0\ldots0}_{15} & 
			\rightarrow  -32768 \\
	\end{split}
\end{displaymath}
Ad ogni passo incremento di uno, questo comporta che incrementando la rappresentazione
di $32767$ si riporta sul bit del segno $\alpha_{0}$. Per la definizione della funzione di 
valutazione ottengo $val(1\underbrace{0\ldots0}_{15}) = -2^{16} = -32768$.

\begin{exercise}[1.6]
$\mathbb{M}$ ha un numero finito di elementi.
\end{exercise}
\begin{proof}
Per far vedere che $\mathbb{M}$ ha un numero finito di elementi posso far \\
vedere che vale
$equinumerous(\mathbb{M}, \lbrace 1, \ldots, n\rbrace)$, con $n \in \mathbb{N}$.
Per la definizione della relazione $equinumerous$ posso costruire una funzione $f$
\emph{one-to-one} tale che $f: \mathbb{M} \rightarrow \mathbb{N}$.

Considerare la rappresentazione in formato stringa 
$x = \alpha_{0}\alpha_{1}\ldots\alpha_{m}\beta_{1}\ldots\beta_{s}$, $\forall x \in \mathbb{M}$.

Per ogni rappresentazione costruisco una nuova rappresentazione che astrae da $\alpha$ e $\beta$, 
ovvero $x = \alpha_{0}\alpha_{1}\ldots\alpha_{m}\beta_{1}\ldots\beta_{s} = \delta_{0} \ldots 
\delta_{m + s} = x'$
con $\alpha_{0} = \delta_{0}, \ldots, \alpha_{m} = \delta_{m}, \beta_{1} = \delta_{m + 1}, \ldots, 
\beta_{s} = \delta_{m + s}$.

Adesso posso costruire la funzione:
\begin{displaymath}
f(\delta_{0} \ldots \delta_{m + s}) = \sum_{i = 0}^{m + s}{\delta{i} * b^{m + s - i}}
\end{displaymath}
In questo modo ho costruito una biezione tra le rappresentazioni ed un sottoinsieme 
dei numeri naturali. \\\\
Adesso devo far vedere che $|\mathbb{M}| = n, n \in \mathbb{N}$.

Ragiono per assurdo. Suppongo che $\not \exists n \in \mathbb{N}: |\mathbb{M}| = n$.
Considero la rappresentazione con massimo valore della funzione $f$ costruita in precedenza,
ovvero sia $x = \delta_{0} \ldots \delta_{m + s} = \underbrace{1 \ldots 1}_{m+s+1}$.
Per le ipotesi di assurdo, allora posso trovare una rappresentazione $x':f(x') \geq f(x)$.
Quindi la rappresentazione di $x'$ dovr\`a essere della forma $x' = \delta_{0}' \delta_{0} 
\ldots \delta_{m + s}$,
ovvero devo aggiungere un bit $\alpha_{0}'$ affinch\`e possa rappresentare 
$x' = 1 \underbrace{0 \ldots 0}_{m+s+1}$. Ma \`e impossibile costruire una rappresentazione
con $m+s+2$ simboli in quanto la dimensione delle rappresentazioni \`e fissata, uguale a $m+s+1$ 
e questo termina la prova.

\end{proof}

\begin{oss}

\end{oss}

\begin{exercise}[1.6]
$r_{1} = b^{-\nu} \wedge r_{2} = (1 - b^{-m})b^{\varphi}$, con $\varphi = b^{s} - \nu$.
\end{exercise}
Suppongo che $x$ sia normalizzato.
\begin{itemize}
\item La configurazione che rappresenta il minimo
numero in valore assoluto (non considero il simbolo $\alpha_{0}$) \`e:
\begin{displaymath}
	r_{1} = \alpha_{1}.\alpha_{2} \ldots \alpha_{m} \beta_{1} \ldots \beta_{s} = 
		1.\underbrace{0 \ldots 0}_{m - 1} \underbrace{0 \ldots 0}_{s}
\end{displaymath}
A cui corrisponde la valutazione $val(r_{1}) = b^{-\nu}$.

\item La configurazione che rappresenta il massimo numero in valore assoluto
(non considero il simbolo $\alpha_{0}$) \`e:
\begin{displaymath}
	r_{2} = \alpha_{1}.\alpha_{2} \ldots \alpha_{m} \beta_{1} \ldots \beta_{s} =
		(b - 1).\underbrace{(b - 1)}_{m - 1}\underbrace{(b - 1)}_{s}
\end{displaymath}
Calcolo adesso la valutazione di $r_{2} = \rho b^{e - \nu}$. Ricavo $e$:
\begin{displaymath}
		e = (b-1)\sum_{i = 1}^{s}{b^{s-i}} = (b-1)\sum_{i = 0}^{s-1}{b^{i}} =
			 (b-1)\frac{b^{s}-1}{b-1} = b^{s}-1
\end{displaymath}
Ricavo $r_{2}$:
\begin{displaymath}
	\begin{split}
		r_{2} 	&= \left ( (b-1)\sum_{i = 1}^{m}{b^{1 - i}} \right)b^{b^{s}-1-\nu} = 
 			\left ( (b-1)\sum_{i = 1}^{m}{b^{-(i - 1)}} \right)b^{b^{s}-1-\nu} = \\
	 			&= \left ( (b-1)\sum_{i = 1}^{m}{\left ( \frac{1}{b} \right ) ^{i - 1}} 
					\right)b^{b^{s}-1-\nu} = 
					\left ( (b-1)\frac{\left ( \frac{1}{b} \right ) ^{m} - 1}{
						\left ( \frac{1}{b} \right ) - 1}
					\right)b^{b^{s}-1-\nu} = \\
				&= \left ( (b-1) \frac{b \left( b^{-m} - 1 \right )}{
						b \left ( \left ( \frac{1}{b} \right ) - 1 \right ) }
					\right)b^{b^{s}-1-\nu} = 
					\left ( (b-1) \frac{b \left( b^{-m} - 1 \right )}{1 - b} 
						\right)b^{b^{s}-1-\nu} = \\
				&= \left ( (b-1) \frac{b \left( 1 - b^{-m} \right )}{b - 1} 
					\right)b^{b^{s}-1-\nu} = 
					\left ( b \left( 1 - b^{-m} \right ) \right)b^{b^{s}-1-\nu} = 
					\left( 1 - b^{-m} \right ) b^{b^{s} - \nu}
	\end{split}
\end{displaymath}
\end{itemize}

\begin{exercise}[1.8]
Per il testo dell'esercizio consultare il libro di testo.
\end{exercise}
Dato che rappresento mediante arrotondamento:
\begin{displaymath}
\begin{split}
u &= \frac{1}{2}b^{1-m} \quad , b = 10 \\
\log_{10}{u} &= \log_{10}{\left ( \frac{1}{2}10^{1-m} \right )} = -\log_{10}{2} + (1 - m) \\
m &= 1 - \log_{10}{2} - \log_{10}{u} \quad , u = 4.66 \times 10^{-10}
\end{split}
\end{displaymath}
\begin{lstlisting}
octave:10> 1 - log10(2) - log10(4.66e-10)
ans =  1.00305840876460e+01
\end{lstlisting}

\begin{oss}
Moltiplicare e dividere per la base $b$ di lavoro \`e ad errore zero se c'\`e 
"posto" sufficiente nell'esponente.
\end{oss}
Cerco di spiegare il significato della precedente osservazione con un esempio.
Sia $n = 1.1111 \times b^{-\nu}$, il quale ha il minimo esponente rappresentabile. Se 
moltiplico e successivamente divido per $10^{-4}$ devo dapprima denormalizzare, 
in quanto non posso rappresentare $b^{-(\nu + 4)}$, ottengo quindi:
\begin{displaymath}
	\frac{10^{-4} \times n}{10^{-4}} = \frac{0.0001 \times b^{-\nu}}{10^{-4}} = 
		10^{4} \times 0.0001 \times b^{-\nu} = 1.0000 \times b^{-\nu}
\end{displaymath}
Perdendo informazione sulle 4 cifre decimali di $n$.

\begin{exercise}[1.9]
Per il testo dell'esercizio consultare il libro di testo.
\end{exercise}
Formalizzo la richiesta: $-\log_{10}{u} = r$, con $r$ uguale al numero di cifre
esattamente rappresentate nella mantissa. Per definizione di $u$ segue che $u > 0$,
questo mi permette di non considerare i valori assoluti.

Distinguo i due casi, relativamente al metodo di rappresentazione usato:
\begin{description}
	\item[per troncamento] 
		\begin{displaymath}
		\begin{split}
			u &= b^{1-m} \\
			-\log_{10}{b^{1-m}} &= r \\
			(m-1)\log_{10}{b} &= r \Rightarrow \lbrace \text{fix } b = 10 \rbrace \\
			\Rightarrow m = 1 - \log_{10}{u}			
		\end{split}
		\end{displaymath}

	\item[per arrotondamento] 
		\begin{displaymath}
		\begin{split}
			u &= \frac{b^{1-m}}{2} \\
			-\log_{10}{\frac{b^{1-m}}{2}} &= r \\
			-\left( -\log_{10}{2} + (1-m)\log_{10}{b} \right) &= r \\
			\log_{10}{2} + (m-1)\log_{10}{b} &= r \Rightarrow 
				\lbrace \text{fix } b = 10 \rbrace \\
			\Rightarrow m = 1 - (\log_{10}{u} + \log_{10}{2}) = 1 - (\log_{10}{2u})
		\end{split}
		\end{displaymath}
\end{description}

\begin{exercise}[1.10]
Per il testo dell'esercizio consultare il libro di testo.
\end{exercise}
\begin{enumerate}
	\item per il \emph{pi\`u grande numero di macchina} $x$ considero la mantissa normalizzata,
	quindi per la definizione dello standard IEEE754 valgono: il massimo esponente che posso
	usare \`e $e = 2046$, $\nu = 1023$ e $b = 2$.
	La mantissa massima che posso fissare \`e $\alpha_{1}.\alpha_{2} \ldots \alpha_{m}$:
	sempre per la definizione dello standard segue che $m = 53$ e preso $x$ normalizzato,
	segue $\alpha_{1} = 1$. Ottengo la rappresentazione $x = 1.\alpha_{2} \ldots \alpha_{53}$, con:
	\begin{displaymath}
	\begin{split}
		\rho &= \sum_{i = 1}^{m}{b^{1-i}} = \sum_{i = 0}^{m-1}{b^{-i}} = 
			\sum_{i = 0}^{52}{b^{-i}} = 
			\frac{b\left( b^{-m} - 1 \right)}{1 - b} = \frac{b^{1-m} - b}{1 - b} = \\
			&= \lbrace b = 2 \text{ by IEEE754 definition} \rbrace = -2(2^{-m}-1) = 
			2(1 - 2^{-m}) \\ \\
		val(x) &= \rho \times b^{2046-1023} = 2(1-2^{-53})2^{1023}
	\end{split}
	\end{displaymath}
	\begin{lstlisting}
		octave:18> 2*(1-2^-53)*2^1023
		ans =  1.79769313486232e+308
		octave:19> realmax
		ans =  1.79769313486232e+308
	\end{lstlisting}


\end{enumerate}


